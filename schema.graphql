type Account @entity {
  id:       Bytes!
  listings: [Listing!]! @derivedFrom(field: "vendor")
  balances: [Balance!]! @derivedFrom(field: "account")
  reviews:  [Review!]!  @derivedFrom(field: "account")
}

type Balance @entity {
  id:      ID!
  account: Account!
  listing: Listing!
  value:   BigInt!
}

type Listing @entity {
  id:        ID!
  vendor:    Account!
  config:    BigInt!
  limit:     BigInt!
  allow:     BigInt!
  royalty:   BigInt!
  uri:       String!
  prices:    [Price!]!       @derivedFrom(field: "listing")
  purchases: [Purchase!]!    @derivedFrom(field: "listing")
  reviews:   [Review!]!      @derivedFrom(field: "listing")
  metadata:  ListingMetadata
}

type ListingMetadata @entity(immutable: true) {
  id:          ID!
  name:        String!
  description: String!
  image:       String!
  media:       [String!]!
  status:      String!
  platform:    String!
  keywords:    [String!]!
  content:     String!
  allow:       [String!]!
}

type Price @entity {
  id:      ID!
  listing: Listing!
  value:   BigInt!
  erc20:   Bytes!
}

type Purchase @entity(immutable: true) {
  id:        ID!
  listing:   Listing!
  blockTime: BigInt!
}

type Review @entity {
  id:      ID!
  account: Account!
  listing: Listing!
  rating:  BigInt!
  uri:     String!
}