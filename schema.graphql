type Account @entity {
  id:       Bytes!
  listings: [Listing!]! @derivedFrom(field: "vendor")
  balances: [Balance!]! @derivedFrom(field: "account")
}

type Balance @entity {
  id:      ID!
  account: Account!
  listing: Listing!
  value:   BigInt!
}

type Listing @entity {
  id:        ID!
  vendor:    Account!
  config:    BigInt!
  limit:     BigInt!
  allow:     BigInt!
  royalty:   BigInt!
  uri:       String!
  prices:    [Price!]!    @derivedFrom(field: "listing")
  purchases: [Purchase!]! @derivedFrom(field: "listing")
}

type Price @entity {
  id:      ID!
  listing: Listing!
  value:   BigInt!
  erc20:   Bytes!
}

type Purchase @entity(immutable: true) {
  id:        ID!
  from:      Bytes!
  to:        Bytes!
  listing:   Listing!
  blockTime: BigInt!
}